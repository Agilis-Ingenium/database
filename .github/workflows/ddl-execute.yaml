# This github action will create the database

name: Execute DDL
on:
  workflow_dispatch:
jobs:
  deploy:
    name: Execute to DDL on Instance
    runs-on: ubuntu-latest
    
    steps:
    - name: Check out code
      uses: actions/checkout@v4
    - name: Install postgres-client on ubunutu
      run: sudo apt-get update && sudo apt-get install postgresql-client
    - name: PSQL Connect
      run: psql postgres://ofnpknxi:mIyip-QntL4PJWk_LINrtBfEklbMkSYt@flora.db.elephantsql.com/ofnpknxi -c 'SELECT version()'
    - name: Concat SQL and Execute
      run: |
          cd DDL
          cat *.sql >> all.sql
          echo "**** COMMANDS TO EXCUTE *****"
          echo "$(<all.sql )"
          echo "*****************************"
          psql postgres://ofnpknxi:mIyip-QntL4PJWk_LINrtBfEklbMkSYt@flora.db.elephantsql.com/ofnpknxi -f all.sql   
